{% extends "personnel/personnel_base_dashboard.html" %}

{% block title %}Inventory{% endblock %}



{% block page_header %}
<h1 class="page-title mb-0">Inventory</h1>
{% endblock %}

{% block page_filter %}
<!-- Unit filter -->
<form method="get" class="d-flex gap-2 align-items-center">
    <input type="text" name="q" class="form-control form-control-sm" 
            placeholder="Search materials..." value="{{ request.GET.q }}">

    <select name="category" class="form-select form-select-sm" style="max-width: 200px;">
        <option value="">All Categories</option>
        {% for cat in categories %}
        <option value="{{ cat }}" {% if cat == selected_category %}selected{% endif %}>
            {{ cat }}
        </option>
        {% endfor %}
    </select>

    <button type="submit" class="btn btn-sm btn-primary">Filter</button>
</form>
{% endblock %}





{% block main_content %}

{% if not unit %}
<div class="alert alert-warning text-center mt-4">
  <strong>Notice:</strong> You are not assigned to any unit. Please contact the GSO Office for assistance.
</div>

{% else %}

<!-- ======= INVENTORY TABLE ======= -->
<div class="table-responsive">
  <table class="table align-middle table-hover request-table">
    <thead class="table-light">
      <tr>
        <th>NO.</th>
        <th>MATERIAL NAME</th>
        <th>DESCRIPTION</th>
        <th>CATEGORY</th>
        <th>QUANTITY</th>
      </tr>
    </thead>
    <tbody>
        {% for material in inventory_items %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ material.name }}</td>
            <td>{{ material.description|default:"—" }}</td>
            <td>{{ material.category|default:"—" }}</td>
            <td>{{ material.quantity }} {{ material.unit_of_measurement }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="text-center text-muted py-3">
            No materials found under your unit.
            </td>
        </tr>
        {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}
{% endblock %}
